import{d as P,u as w,a as C,r as i,w as N,o as T,b as t,c as s,e as c,f as a,g as $,t as m,h as n,i as B,v as V,F as S,j as b,k as L,n as D,l as F}from"./index-69e497b3.js";import{T as R}from"./Table-8fb558aa.js";const M={key:0},j={key:0,class:"search-container"},z=["disabled"],E={key:0,class:"fixed-list"},U=c("div",{class:"static"},"Loading...",-1),q=[U],A={key:1,class:"fixed-list"},G=["onClick"],H={key:2,class:"fixed-list"},I=c("div",{class:"static"},"Not Found",-1),J=[I],K={key:1},O={key:2},Z=P({__name:"Peoples",setup(Q){const e=w(),_=C(),f=i({columns:["name","height","mass","hair_color"],results:[],localData:!1}),k=i(0),d=i(null),h=i(null),u=i(""),p=i({});let v;const g=l=>{e.dispatch("fetchPeoples",l).then(()=>{f.value.results=e.getters.peoples.results,k.value=e.getters.peoples.count,d.value=e.getters.peoples.next,h.value=e.getters.peoples.previous})},y=l=>{e.dispatch("fetchPeoplesSearch",l).then(()=>{p.value=e.getters.peoplesSearch.results})},x=l=>{_.push(`/peoples/${l.split("/")[l.split("/").length-2]}`)};return N(u,(l,o)=>{clearTimeout(v),l.length>0&&(v=setTimeout(()=>{y(`https://swapi.dev/api/people/?search=${l}`)},500),console.log(v))}),T(()=>{g("https://swapi.dev/api/people/")}),(l,o)=>(t(),s(S,null,[c("a",{href:"#",onClick:o[0]||(o[0]=r=>a(_).go(-1))},"Back"),c("h1",null,[$("Peoples "),a(e).getters.peoplesStatus==="default"?(t(),s("span",M,"("+m(k.value)+")",1)):n("",!0)]),a(e).getters.peoplesStatus==="default"?(t(),s("div",j,[B(c("input",{type:"search","onUpdate:modelValue":o[1]||(o[1]=r=>u.value=r),class:"search",placeholder:"Search...",disabled:a(e).getters.peoplesSearchStatus==="wait"},null,8,z),[[V,u.value]]),a(e).getters.peoplesSearchStatus==="wait"&&u.value.length>0?(t(),s("div",E,q)):n("",!0),p.value.length>0&&u.value.length>0&&a(e).getters.peoplesSearchStatus==="default"?(t(),s("div",A,[(t(!0),s(S,null,b(p.value,r=>(t(),s("div",{onClick:W=>x(r.url)},m(r.name),9,G))),256))])):n("",!0),p.value.length===0&&u.value.length>0&&a(e).getters.peoplesSearchStatus==="default"?(t(),s("div",H,J)):n("",!0)])):n("",!0),a(e).getters.peoplesStatus==="wait"?(t(),s("div",K,"Loading...")):n("",!0),a(e).getters.peoplesStatus==="default"?(t(),s("div",O,[c("nav",null,[h.value?(t(),s("div",{key:0,class:"link",onClick:o[2]||(o[2]=r=>g(h.value))},"Prev")):n("",!0),d.value?(t(),s("div",{key:1,class:"link",onClick:o[3]||(o[3]=r=>g(d.value))},"Next")):n("",!0)]),L(a(R),D(F(f.value)),null,16)])):n("",!0)],64))}});export{Z as default};
